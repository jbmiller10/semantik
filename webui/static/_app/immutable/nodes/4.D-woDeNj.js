import{S as Ft,i as Rt,s as Ut,n as Lt,d as i,a as at,b as rt,c as t,o as qt,q as l,e as s,f as u,u as D,h,g as P,j as a,k as m,t as T,l as Jt,v as Ot}from"../chunks/DY1wLrvC.js";import"../chunks/IHki7fMi.js";import{a as Ht}from"../chunks/BqB9sby4.js";import{a as Zt}from"../chunks/BoocXJyJ.js";function Bt(v){let e,n,r="Full Name:",b,o,f=v[3].user.full_name+"",y;return{c(){e=a("div"),n=a("span"),n.textContent=r,b=m(),o=a("span"),y=T(f),this.h()},l(g){e=s(g,"DIV",{class:!0});var d=u(e);n=s(d,"SPAN",{class:!0,"data-svelte-h":!0}),D(n)!=="svelte-67us1h"&&(n.textContent=r),b=h(d),o=s(d,"SPAN",{class:!0});var S=u(o);y=P(S,f),S.forEach(i),d.forEach(i),this.h()},h(){l(n,"class","text-gray-600"),l(o,"class","font-medium ml-2"),l(e,"class","col-span-2")},m(g,d){rt(g,e,d),t(e,n),t(e,b),t(e,o),t(o,y)},p(g,d){d&8&&f!==(f=g[3].user.full_name+"")&&at(y,f)},d(g){g&&i(e)}}}function Gt(v){let e,n,r="System Statistics",b,o,f,y,g=v[0].total_jobs+"",d,S,E,ht="Total Jobs",ot,I,B,Y=v[0].total_documents.toLocaleString()+"",lt,J,w,mt="Documents",dt,V,F,$=v[0].total_vectors.toLocaleString()+"",nt,ct,R,L="Vectors",O,Z,G,N=(v[0].disk_usage.embeddings_size_mb+v[0].disk_usage.database_size_mb).toFixed(1)+"",ut,vt,A,K,bt="Disk Usage",p,Q,M,x="Storage Breakdown",ft,j,C,tt,pt="Embeddings:",_t,c,_=v[0].disk_usage.embeddings_size_mb.toFixed(1)+"",U,z,W,X,q,gt="Database:",et,st,xt=v[0].disk_usage.database_size_mb.toFixed(1)+"",Ct,At;return{c(){e=a("div"),n=a("h2"),n.textContent=r,b=m(),o=a("div"),f=a("div"),y=a("div"),d=T(g),S=m(),E=a("div"),E.textContent=ht,ot=m(),I=a("div"),B=a("div"),lt=T(Y),J=m(),w=a("div"),w.textContent=mt,dt=m(),V=a("div"),F=a("div"),nt=T($),ct=m(),R=a("div"),R.textContent=L,O=m(),Z=a("div"),G=a("div"),ut=T(N),vt=T(" MB"),A=m(),K=a("div"),K.textContent=bt,p=m(),Q=a("div"),M=a("h3"),M.textContent=x,ft=m(),j=a("div"),C=a("div"),tt=a("span"),tt.textContent=pt,_t=m(),c=a("span"),U=T(_),z=T(" MB"),W=m(),X=a("div"),q=a("span"),q.textContent=gt,et=m(),st=a("span"),Ct=T(xt),At=T(" MB"),this.h()},l(H){e=s(H,"DIV",{class:!0});var k=u(e);n=s(k,"H2",{class:!0,"data-svelte-h":!0}),D(n)!=="svelte-133urtg"&&(n.textContent=r),b=h(k),o=s(k,"DIV",{class:!0});var it=u(o);f=s(it,"DIV",{class:!0});var yt=u(f);y=s(yt,"DIV",{class:!0});var Nt=u(y);d=P(Nt,g),Nt.forEach(i),S=h(yt),E=s(yt,"DIV",{class:!0,"data-svelte-h":!0}),D(E)!=="svelte-1kv1zmt"&&(E.textContent=ht),yt.forEach(i),ot=h(it),I=s(it,"DIV",{class:!0});var Dt=u(I);B=s(Dt,"DIV",{class:!0});var jt=u(B);lt=P(jt,Y),jt.forEach(i),J=h(Dt),w=s(Dt,"DIV",{class:!0,"data-svelte-h":!0}),D(w)!=="svelte-juoptb"&&(w.textContent=mt),Dt.forEach(i),dt=h(it),V=s(it,"DIV",{class:!0});var Et=u(V);F=s(Et,"DIV",{class:!0});var zt=u(F);nt=P(zt,$),zt.forEach(i),ct=h(Et),R=s(Et,"DIV",{class:!0,"data-svelte-h":!0}),D(R)!=="svelte-1e5pgd5"&&(R.textContent=L),Et.forEach(i),O=h(it),Z=s(it,"DIV",{class:!0});var It=u(Z);G=s(It,"DIV",{class:!0});var Mt=u(G);ut=P(Mt,N),vt=P(Mt," MB"),Mt.forEach(i),A=h(It),K=s(It,"DIV",{class:!0,"data-svelte-h":!0}),D(K)!=="svelte-ip8ed"&&(K.textContent=bt),It.forEach(i),it.forEach(i),p=h(k),Q=s(k,"DIV",{class:!0});var wt=u(Q);M=s(wt,"H3",{class:!0,"data-svelte-h":!0}),D(M)!=="svelte-235uxz"&&(M.textContent=x),ft=h(wt),j=s(wt,"DIV",{class:!0});var Vt=u(j);C=s(Vt,"DIV",{class:!0});var kt=u(C);tt=s(kt,"SPAN",{class:!0,"data-svelte-h":!0}),D(tt)!=="svelte-42j58j"&&(tt.textContent=pt),_t=h(kt),c=s(kt,"SPAN",{class:!0});var Pt=u(c);U=P(Pt,_),z=P(Pt," MB"),Pt.forEach(i),kt.forEach(i),W=h(Vt),X=s(Vt,"DIV",{class:!0});var St=u(X);q=s(St,"SPAN",{class:!0,"data-svelte-h":!0}),D(q)!=="svelte-1tvrw9w"&&(q.textContent=gt),et=h(St),st=s(St,"SPAN",{class:!0});var Tt=u(st);Ct=P(Tt,xt),At=P(Tt," MB"),Tt.forEach(i),St.forEach(i),Vt.forEach(i),wt.forEach(i),k.forEach(i),this.h()},h(){l(n,"class","text-xl font-semibold mb-4"),l(y,"class","text-3xl font-bold text-blue-600"),l(E,"class","text-gray-600"),l(f,"class","text-center"),l(B,"class","text-3xl font-bold text-green-600"),l(w,"class","text-gray-600"),l(I,"class","text-center"),l(F,"class","text-3xl font-bold text-purple-600"),l(R,"class","text-gray-600"),l(V,"class","text-center"),l(G,"class","text-3xl font-bold text-orange-600"),l(K,"class","text-gray-600"),l(Z,"class","text-center"),l(o,"class","grid grid-cols-2 md:grid-cols-4 gap-6"),l(M,"class","font-medium text-gray-700 mb-2"),l(tt,"class","text-gray-600"),l(c,"class","font-medium"),l(C,"class","flex justify-between"),l(q,"class","text-gray-600"),l(st,"class","font-medium"),l(X,"class","flex justify-between"),l(j,"class","space-y-2 text-sm"),l(Q,"class","mt-6 pt-6 border-t"),l(e,"class","bg-white rounded-lg shadow-md p-6 mb-6")},m(H,k){rt(H,e,k),t(e,n),t(e,b),t(e,o),t(o,f),t(f,y),t(y,d),t(f,S),t(f,E),t(o,ot),t(o,I),t(I,B),t(B,lt),t(I,J),t(I,w),t(o,dt),t(o,V),t(V,F),t(F,nt),t(V,ct),t(V,R),t(o,O),t(o,Z),t(Z,G),t(G,ut),t(G,vt),t(Z,A),t(Z,K),t(e,p),t(e,Q),t(Q,M),t(Q,ft),t(Q,j),t(j,C),t(C,tt),t(C,_t),t(C,c),t(c,U),t(c,z),t(j,W),t(j,X),t(X,q),t(X,et),t(X,st),t(st,Ct),t(st,At)},p(H,k){k&1&&g!==(g=H[0].total_jobs+"")&&at(d,g),k&1&&Y!==(Y=H[0].total_documents.toLocaleString()+"")&&at(lt,Y),k&1&&$!==($=H[0].total_vectors.toLocaleString()+"")&&at(nt,$),k&1&&N!==(N=(H[0].disk_usage.embeddings_size_mb+H[0].disk_usage.database_size_mb).toFixed(1)+"")&&at(ut,N),k&1&&_!==(_=H[0].disk_usage.embeddings_size_mb.toFixed(1)+"")&&at(U,_),k&1&&xt!==(xt=H[0].disk_usage.database_size_mb.toFixed(1)+"")&&at(Ct,xt)},d(H){H&&i(e)}}}function Kt(v){let e,n='<div class="animate-pulse"><div class="h-6 bg-gray-200 rounded w-1/4 mb-4"></div> <div class="space-y-3"><div class="h-4 bg-gray-200 rounded w-3/4"></div> <div class="h-4 bg-gray-200 rounded w-1/2"></div> <div class="h-4 bg-gray-200 rounded w-2/3"></div></div></div>';return{c(){e=a("div"),e.innerHTML=n,this.h()},l(r){e=s(r,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1vtg6x0"&&(e.innerHTML=n),this.h()},h(){l(e,"class","bg-white rounded-lg shadow-md p-6")},m(r,b){rt(r,e,b)},p:Lt,d(r){r&&i(e)}}}function Qt(v){let e,n;return{c(){e=a("i"),n=T("Reset Database"),this.h()},l(r){e=s(r,"I",{class:!0}),u(e).forEach(i),n=P(r,"Reset Database"),this.h()},h(){l(e,"class","fas fa-database mr-2")},m(r,b){rt(r,e,b),rt(r,n,b)},d(r){r&&(i(e),i(n))}}}function Wt(v){let e,n;return{c(){e=a("i"),n=T("Resetting..."),this.h()},l(r){e=s(r,"I",{class:!0}),u(e).forEach(i),n=P(r,"Resetting..."),this.h()},h(){l(e,"class","fas fa-spinner fa-spin mr-2")},m(r,b){rt(r,e,b),rt(r,n,b)},d(r){r&&(i(e),i(n))}}}function Xt(v){var tt,pt,_t;let e,n,r='<h1 class="text-3xl font-bold text-gray-800"><i class="fas fa-cog mr-2"></i>System Settings</h1> <a href="/" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors"><i class="fas fa-arrow-left mr-2"></i>Back to Dashboard</a>',b,o,f,y="User Information",g,d,S,E,ht="Username:",ot,I,B=((tt=v[3].user)==null?void 0:tt.username)+"",Y,lt,J,w,mt="Email:",dt,V,F=((pt=v[3].user)==null?void 0:pt.email)+"",$,nt,ct,R,L,O,Z='<i class="fas fa-exclamation-triangle mr-2"></i>Danger Zone',G,N,ut="The following actions are destructive and cannot be undone. Please proceed with caution.",vt,A,K,bt,p=((_t=v[3].user)==null?void 0:_t.full_name)&&Bt(v);function Q(c,_){if(c[1])return Kt;if(c[0])return Gt}let M=Q(v),x=M&&M(v);function ft(c,_){return c[2]?Wt:Qt}let j=ft(v),C=j(v);return{c(){e=a("div"),n=a("div"),n.innerHTML=r,b=m(),o=a("div"),f=a("h2"),f.textContent=y,g=m(),d=a("div"),S=a("div"),E=a("span"),E.textContent=ht,ot=m(),I=a("span"),Y=T(B),lt=m(),J=a("div"),w=a("span"),w.textContent=mt,dt=m(),V=a("span"),$=T(F),nt=m(),p&&p.c(),ct=m(),x&&x.c(),R=m(),L=a("div"),O=a("h2"),O.innerHTML=Z,G=m(),N=a("p"),N.textContent=ut,vt=m(),A=a("button"),C.c(),this.h()},l(c){e=s(c,"DIV",{class:!0});var _=u(e);n=s(_,"DIV",{class:!0,"data-svelte-h":!0}),D(n)!=="svelte-19gumev"&&(n.innerHTML=r),b=h(_),o=s(_,"DIV",{class:!0});var U=u(o);f=s(U,"H2",{class:!0,"data-svelte-h":!0}),D(f)!=="svelte-169bcaz"&&(f.textContent=y),g=h(U),d=s(U,"DIV",{class:!0});var z=u(d);S=s(z,"DIV",{});var W=u(S);E=s(W,"SPAN",{class:!0,"data-svelte-h":!0}),D(E)!=="svelte-1gvt2ol"&&(E.textContent=ht),ot=h(W),I=s(W,"SPAN",{class:!0});var X=u(I);Y=P(X,B),X.forEach(i),W.forEach(i),lt=h(z),J=s(z,"DIV",{});var q=u(J);w=s(q,"SPAN",{class:!0,"data-svelte-h":!0}),D(w)!=="svelte-1lml3g1"&&(w.textContent=mt),dt=h(q),V=s(q,"SPAN",{class:!0});var gt=u(V);$=P(gt,F),gt.forEach(i),q.forEach(i),nt=h(z),p&&p.l(z),z.forEach(i),U.forEach(i),ct=h(_),x&&x.l(_),R=h(_),L=s(_,"DIV",{class:!0});var et=u(L);O=s(et,"H2",{class:!0,"data-svelte-h":!0}),D(O)!=="svelte-18u7y42"&&(O.innerHTML=Z),G=h(et),N=s(et,"P",{class:!0,"data-svelte-h":!0}),D(N)!=="svelte-1xxr4dj"&&(N.textContent=ut),vt=h(et),A=s(et,"BUTTON",{class:!0});var st=u(A);C.l(st),st.forEach(i),et.forEach(i),_.forEach(i),this.h()},h(){l(n,"class","flex justify-between items-center mb-8"),l(f,"class","text-xl font-semibold mb-4"),l(E,"class","text-gray-600"),l(I,"class","font-medium ml-2"),l(w,"class","text-gray-600"),l(V,"class","font-medium ml-2"),l(d,"class","grid grid-cols-2 gap-4"),l(o,"class","bg-white rounded-lg shadow-md p-6 mb-6"),l(O,"class","text-xl font-semibold text-red-800 mb-4"),l(N,"class","text-red-700 mb-4"),A.disabled=v[2],l(A,"class","px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),l(L,"class","bg-red-50 border-2 border-red-200 rounded-lg p-6"),l(e,"class","container mx-auto px-4 py-8")},m(c,_){rt(c,e,_),t(e,n),t(e,b),t(e,o),t(o,f),t(o,g),t(o,d),t(d,S),t(S,E),t(S,ot),t(S,I),t(I,Y),t(d,lt),t(d,J),t(J,w),t(J,dt),t(J,V),t(V,$),t(d,nt),p&&p.m(d,null),t(e,ct),x&&x.m(e,null),t(e,R),t(e,L),t(L,O),t(L,G),t(L,N),t(L,vt),t(L,A),C.m(A,null),K||(bt=qt(A,"click",v[4]),K=!0)},p(c,[_]){var U,z,W;_&8&&B!==(B=((U=c[3].user)==null?void 0:U.username)+"")&&at(Y,B),_&8&&F!==(F=((z=c[3].user)==null?void 0:z.email)+"")&&at($,F),(W=c[3].user)!=null&&W.full_name?p?p.p(c,_):(p=Bt(c),p.c(),p.m(d,null)):p&&(p.d(1),p=null),M===(M=Q(c))&&x?x.p(c,_):(x&&x.d(1),x=M&&M(c),x&&(x.c(),x.m(e,R))),j!==(j=ft(c))&&(C.d(1),C=j(c),C&&(C.c(),C.m(A,null))),_&4&&(A.disabled=c[2])},i:Lt,o:Lt,d(c){c&&i(e),p&&p.d(),x&&x.d(),C.d(),K=!1,bt()}}}function Yt(v,e,n){let r;Jt(v,Zt,d=>n(3,r=d));let b=null,o=!0,f=!1;Ot(async()=>{await y()});async function y(){try{n(0,b=await Ht.get("/api/settings/stats"))}catch(d){console.error("Failed to load stats:",d)}finally{n(1,o=!1)}}async function g(){if(confirm("Are you sure you want to reset the database? This will delete ALL jobs, documents, and vectors. This action cannot be undone!")&&confirm("This is your last chance to cancel. All data will be permanently deleted. Continue?")){n(2,f=!0);try{await Ht.post("/api/settings/reset-database"),alert("Database reset successfully"),await y()}catch{alert("Failed to reset database")}finally{n(2,f=!1)}}}return[b,o,f,r,g]}class ae extends Ft{constructor(e){super(),Rt(this,e,Yt,Xt,Ut,{})}}export{ae as component};
