CODE_AUDIT_REPORT.md:219:- `chunking_tasks.py`: `_classify_error_sync()` (lines 388-415)
htmlcov/z_32391246c6b6e61b_chunking_tasks_py.html:456:    <p class="pln"><span class="n"><a id="t374" href="#t374">374</a></span><span class="t">                    <span class="str">"error_type"</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_classify_error_sync</span><span class="op">(</span><span class="nam">exc</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
htmlcov/z_32391246c6b6e61b_chunking_tasks_py.html:494:    <p class="mis show_mis"><span class="n"><a id="t412" href="#t412">412</a></span><span class="t">    <span class="key">def</span> <span class="nam">_classify_error_sync</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">exc</span><span class="op">:</span> <span class="nam">Exception</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
htmlcov/function_index.html:1581:                <td class="name left"><a href="z_32391246c6b6e61b_chunking_tasks_py.html#t412"><data value='classify_error_sync'>ChunkingTask._classify_error_sync</data></a></td>
.code/agents/7/exec-call_v4lQq7WML93x5HzUOcs3Ot7i.txt:350:                    "error_type": self._classify_error_sync(exc),
.code/agents/7/exec-call_v4lQq7WML93x5HzUOcs3Ot7i.txt:388:    def _classify_error_sync(self, exc: Exception) -> str:
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:12:Context: Repository: /home/john/semantik (polyglot monorepo). Branch: progress-update-manager. Ticket ENG-002 summary: create shared ErrorClassifier to unify existing duplication between `packages/webui/chunking_tasks.py::_classify_error_sync` (string codes) and `packages/webui/services/chunking_error_handler.py::classify_error` (ChunkingErrorType enums). Needs new module `packages/webui/utils/error_classifier.py` providing ErrorClassificationResult dataclass with enum/string/metadata, ErrorClassifier class with ordered rules (type checks like ChunkingMemoryError, message heuristics like "timeout"), extension hooks. Tasks include refactoring celery task wrapper to use classifier string output, updating ChunkingErrorHandler to delegate to classifier for enums, wiring dependencies, updating unit tests (`tests/unit/test_chunking_service_errors.py`, celery task tests), adding new tests for classifier, ensuring type hints and docs updated. Acceptance criteria: Celery tasks still emit same string codes, handler returns same enums, new tests cover rules, lint/type-check/test pass. Key files: `packages/webui/chunking_tasks.py`, `packages/webui/services/chunking_error_handler.py`, `packages/shared/chunking/domain/exceptions.py`. Investigate other modules referencing `_classify_error_sync` or classification logic. Read ticket file `tickets/ENG-002.txt` for details. Produce a phased plan (analysis, design, implementation, testing, rollout) with rationale.
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:28:Context: Repository: /home/john/semantik (polyglot monorepo). Branch: progress-update-manager. Ticket ENG-002 summary: create shared ErrorClassifier to unify existing duplication between `packages/webui/chunking_tasks.py::_classify_error_sync` (string codes) and `packages/webui/services/chunking_error_handler.py::classify_error` (ChunkingErrorType enums). Needs new module `packages/webui/utils/error_classifier.py` providing ErrorClassificationResult dataclass with enum/string/metadata, ErrorClassifier class with ordered rules (type checks like ChunkingMemoryError, message heuristics like "timeout"), extension hooks. Tasks include refactoring celery task wrapper to use classifier string output, updating ChunkingErrorHandler to delegate to classifier for enums, wiring dependencies, updating unit tests (`tests/unit/test_chunking_service_errors.py`, celery task tests), adding new tests for classifier, ensuring type hints and docs updated. Acceptance criteria: Celery tasks still emit same string codes, handler returns same enums, new tests cover rules, lint/type-check/test pass. Key files: `packages/webui/chunking_tasks.py`, `packages/webui/services/chunking_error_handler.py`, `packages/shared/chunking/domain/exceptions.py`. Investigate other modules referencing `_classify_error_sync` or classification logic. Read ticket file `tickets/ENG-002.txt` for details. Produce a phased plan (analysis, design, implementation, testing, rollout) with rationale.
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:76:- `packages/webui/chunking_tasks.py:388-415` defines `_classify_error_sync` returning string identifiers for internal exception classes (e.g., `ChunkingMemoryError`).
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:107:                    "error_type": self._classify_error_sync(exc),
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:145:[2025-10-17T23:52:10] exec bash -lc 'rg "_classify_error_sync" -n' in /home/john/semantik/.
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:146:[2025-10-17T23:52:10] bash -lc 'rg "_classify_error_sync" -n' exited 127 in 19ms:
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:154:[2025-10-17T23:52:14] exec bash -lc 'grep -R "_classify_error_sync" -n' in /home/john/semantik/.
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:155:[2025-10-17T23:52:15] bash -lc 'grep -R "_classify_error_sync" -n' exited 124 in 1.00s:
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:162:[2025-10-17T23:52:18] exec bash -lc 'grep -R "_classify_error_sync" packages/webui -n' in /home/john/semantik/.
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:163:[2025-10-17T23:52:18] bash -lc 'grep -R "_classify_error_sync" packages/webui -n' succeeded in 22ms:
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:164:packages/webui/chunking_tasks.py:374:                    "error_type": self._classify_error_sync(exc),
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:165:packages/webui/chunking_tasks.py:412:    def _classify_error_sync(self, exc: Exception) -> str:
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:371:- Map existing unit coverage in `tests/unit/test_chunking_error_handler.py` and `tests/unit/test_chunking_service_errors.py` to identify scenarios needing migration or expansion once `_classify_error_sync` disappears.  
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:372:- Flag any other modules or fixtures that patch `_classify_error_sync` or `ChunkingErrorHandler.classify_error` to plan dependency rewiring and avoid brittle imports.
.code/agents/fe1ee8f8-8cea-40b8-bb82-df4e86a74f9a/result.txt:383:- Replace `_classify_error_sync` in `packages/webui/chunking_tasks.py:412` with a lightweight wrapper around the shared classifier, maintaining the same Redis payload schema and log messages.  
.mypy_cache/3.11/packages/webui/chunking_tasks.data.json:1:{".class":"MypyFile","_fullname":"packages.webui.chunking_tasks","future_import_flags":[],"is_partial_stub_package":false,"is_stub":false,"names":{".class":"SymbolTable","Any":{".class":"SymbolTableNode","cross_ref":"typing.Any","kind":"Gdef"},"AsyncRedis":{".class":"SymbolTableNode","cross_ref":"redis.asyncio.client.Redis","kind":"Gdef"},"AsyncSession":{".class":"SymbolTableNode","cross_ref":"sqlalchemy.ext.asyncio.session.AsyncSession","kind":"Gdef"},"AsyncSessionLocal":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.database.AsyncSessionLocal","kind":"Gdef"},"CHUNKING_CPU_TIME_LIMIT":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_CPU_TIME_LIMIT","name":"CHUNKING_CPU_TIME_LIMIT","setter_type":null,"type":"builtins.int"}},"CHUNKING_HARD_TIME_LIMIT":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_HARD_TIME_LIMIT","name":"CHUNKING_HARD_TIME_LIMIT","setter_type":null,"type":"builtins.int"}},"CHUNKING_MAX_RETRIES":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_MAX_RETRIES","name":"CHUNKING_MAX_RETRIES","setter_type":null,"type":"builtins.int"}},"CHUNKING_MEMORY_LIMIT_GB":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_MEMORY_LIMIT_GB","name":"CHUNKING_MEMORY_LIMIT_GB","setter_type":null,"type":"builtins.int"}},"CHUNKING_RETRY_BACKOFF":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_RETRY_BACKOFF","name":"CHUNKING_RETRY_BACKOFF","setter_type":null,"type":"builtins.bool"}},"CHUNKING_RETRY_BACKOFF_MAX":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_RETRY_BACKOFF_MAX","name":"CHUNKING_RETRY_BACKOFF_MAX","setter_type":null,"type":"builtins.int"}},"CHUNKING_SOFT_TIME_LIMIT":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CHUNKING_SOFT_TIME_LIMIT","name":"CHUNKING_SOFT_TIME_LIMIT","setter_type":null,"type":"builtins.int"}},"CIRCUIT_BREAKER_EXPECTED_EXCEPTION":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CIRCUIT_BREAKER_EXPECTED_EXCEPTION","name":"CIRCUIT_BREAKER_EXPECTED_EXCEPTION","setter_type":null,"type":{".class":"TupleType","implicit":false,"items":[{".class":"CallableType","arg_kinds":[0,1,1,1,1],"arg_names":["detail","correlation_id","dependency","dependency_error","operation_id"],"arg_types":["builtins.str",{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true}],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"ChunkingDependencyError","ret_type":"packages.webui.api.chunking_exceptions.ChunkingDependencyError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}}}},"CIRCUIT_BREAKER_FAILURE_THRESHOLD":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CIRCUIT_BREAKER_FAILURE_THRESHOLD","name":"CIRCUIT_BREAKER_FAILURE_THRESHOLD","setter_type":null,"type":"builtins.int"}},"CIRCUIT_BREAKER_RECOVERY_TIMEOUT":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.CIRCUIT_BREAKER_RECOVERY_TIMEOUT","name":"CIRCUIT_BREAKER_RECOVERY_TIMEOUT","setter_type":null,"type":"builtins.int"}},"ChunkResult":{".class":"SymbolTableNode","cross_ref":"packages.shared.text_processing.base_chunker.ChunkResult","kind":"Gdef"},"ChunkingDependencyError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingDependencyError","kind":"Gdef"},"ChunkingErrorHandler":{".class":"SymbolTableNode","cross_ref":"packages.webui.services.chunking_error_handler.ChunkingErrorHandler","kind":"Gdef"},"ChunkingMemoryError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingMemoryError","kind":"Gdef"},"ChunkingPartialFailureError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingPartialFailureError","kind":"Gdef"},"ChunkingResourceLimitError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingResourceLimitError","kind":"Gdef"},"ChunkingService":{".class":"SymbolTableNode","cross_ref":"packages.webui.services.chunking_service.ChunkingService","kind":"Gdef"},"ChunkingStrategyError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingStrategyError","kind":"Gdef"},"ChunkingTask":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["builtins.object"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"packages.webui.chunking_tasks.ChunkingTask","name":"ChunkingTask","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":["fallback_to_any"],"fullname":"packages.webui.chunking_tasks.ChunkingTask","has_param_spec_type":false,"metaclass_type":null,"metadata":{},"module_name":"packages.webui.chunking_tasks","mro":["packages.webui.chunking_tasks.ChunkingTask","builtins.object"],"names":{".class":"SymbolTable","__init__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.__init__","name":"__init__","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"__init__ of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_check_circuit_breaker":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._check_circuit_breaker","name":"_check_circuit_breaker","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_check_circuit_breaker of ChunkingTask","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_circuit_breaker_failures":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._circuit_breaker_failures","name":"_circuit_breaker_failures","setter_type":null,"type":"builtins.int"}},"_circuit_breaker_last_failure_time":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._circuit_breaker_last_failure_time","name":"_circuit_breaker_last_failure_time","setter_type":null,"type":{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"_circuit_breaker_state":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._circuit_breaker_state","name":"_circuit_breaker_state","setter_type":null,"type":"builtins.str"}},"_classify_error_sync":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","exc"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._classify_error_sync","name":"_classify_error_sync","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","exc"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.Exception"],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_classify_error_sync of ChunkingTask","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_error_handler":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._error_handler","name":"_error_handler","setter_type":null,"type":{".class":"UnionType","items":["packages.webui.services.chunking_error_handler.ChunkingErrorHandler",{".class":"NoneType"}],"uses_pep604_syntax":true}}},"_graceful_shutdown":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._graceful_shutdown","name":"_graceful_shutdown","setter_type":null,"type":"builtins.bool"}},"_handle_shutdown":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","signum","frame"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._handle_shutdown","name":"_handle_shutdown","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","signum","frame"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.int",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_handle_shutdown of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_redis_client":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._redis_client","name":"_redis_client","setter_type":null,"type":{".class":"UnionType","items":[{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"redis.client.Redis"},{".class":"NoneType"}],"uses_pep604_syntax":true}}},"_send_to_dead_letter_queue":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,0,0],"arg_names":["self","task_id","operation_id","correlation_id","error","error_type","args","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._send_to_dead_letter_queue","name":"_send_to_dead_letter_queue","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,0,0],"arg_names":["self","task_id","operation_id","correlation_id","error","error_type","args","kwargs"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.str","builtins.str","builtins.str","builtins.Exception","builtins.str",{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.tuple"},{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.dict"}],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_send_to_dead_letter_queue of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_shutdown_handler_registered":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._shutdown_handler_registered","name":"_shutdown_handler_registered","setter_type":null,"type":"builtins.bool"}},"_update_circuit_breaker_state":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask._update_circuit_breaker_state","name":"_update_circuit_breaker_state","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_update_circuit_breaker_state of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"acks_late":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.acks_late","name":"acks_late","setter_type":null,"type":"builtins.bool"}},"autoretry_for":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.autoretry_for","name":"autoretry_for","setter_type":null,"type":{".class":"TupleType","implicit":false,"items":[{".class":"CallableType","arg_kinds":[0,1,1,1,1,1],"arg_names":["detail","correlation_id","operation_id","memory_used","memory_limit","recovery_hint"],"arg_types":["builtins.str",{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true}],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"ChunkingMemoryError","ret_type":"packages.webui.api.chunking_exceptions.ChunkingMemoryError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]},{".class":"CallableType","arg_kinds":[0,1,1,1,1,1],"arg_names":["detail","correlation_id","operation_id","elapsed_time","timeout_limit","estimated_completion"],"arg_types":["builtins.str",{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":true}],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"ChunkingTimeoutError","ret_type":"packages.webui.api.chunking_exceptions.ChunkingTimeoutError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]},{".class":"CallableType","arg_kinds":[0,1,1,1,1],"arg_names":["detail","correlation_id","strategy","fallback_strategy","operation_id"],"arg_types":["builtins.str",{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true}],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"ChunkingStrategyError","ret_type":"packages.webui.api.chunking_exceptions.ChunkingStrategyError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]},{".class":"CallableType","arg_kinds":[0,1,1,1,1],"arg_names":["detail","correlation_id","dependency","dependency_error","operation_id"],"arg_types":["builtins.str",{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":true}],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"ChunkingDependencyError","ret_type":"packages.webui.api.chunking_exceptions.ChunkingDependencyError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]},{".class":"CallableType","arg_kinds":[2],"arg_names":["args"],"arg_types":["builtins.object"],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"ConnectionError","ret_type":"builtins.ConnectionError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]},{".class":"CallableType","arg_kinds":[2],"arg_names":["args"],"arg_types":["builtins.object"],"def_extras":{"first_arg":"self"},"fallback":"builtins.type","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":true,"is_ellipsis_args":false,"name":"TimeoutError","ret_type":"builtins.TimeoutError","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}}}},"before_start":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["self","task_id","args","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.before_start","name":"before_start","type":{".class":"CallableType","arg_kinds":[0,0,0,0],"arg_names":["self","task_id","args","kwargs"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.str",{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.tuple"},{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.dict"}],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"before_start of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"max_retries":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.max_retries","name":"max_retries","setter_type":null,"type":"builtins.int"}},"on_failure":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0],"arg_names":["self","exc","task_id","args","kwargs","einfo"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.on_failure","name":"on_failure","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0],"arg_names":["self","exc","task_id","args","kwargs","einfo"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.Exception","builtins.str",{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.tuple"},{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"on_failure of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"on_retry":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0],"arg_names":["self","exc","task_id","args","kwargs","einfo"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.on_retry","name":"on_retry","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0],"arg_names":["self","exc","task_id","args","kwargs","einfo"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.Exception","builtins.str",{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.tuple"},{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"on_retry of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"on_success":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0],"arg_names":["self","retval","task_id","args","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.on_success","name":"on_success","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0],"arg_names":["self","retval","task_id","args","kwargs"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},"builtins.str",{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.tuple"},{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"builtins.dict"}],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"on_success of ChunkingTask","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"reject_on_worker_lost":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.reject_on_worker_lost","name":"reject_on_worker_lost","setter_type":null,"type":"builtins.bool"}},"retry_backoff":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.retry_backoff","name":"retry_backoff","setter_type":null,"type":"builtins.bool"}},"retry_backoff_max":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.retry_backoff_max","name":"retry_backoff_max","setter_type":null,"type":"builtins.int"}},"track_started":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"Var","flags":["is_initialized_in_class","is_ready","is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.ChunkingTask.track_started","name":"track_started","setter_type":null,"type":"builtins.bool"}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"packages.webui.chunking_tasks.ChunkingTask.Self","id":0,"name":"Self","namespace":"","upper_bound":"packages.webui.chunking_tasks.ChunkingTask","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"ChunkingTimeoutError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingTimeoutError","kind":"Gdef"},"ChunkingValidationError":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ChunkingValidationError","kind":"Gdef"},"CollectionRepository":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.repositories.collection_repository.CollectionRepository","kind":"Gdef"},"CollectionStatus":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.models.CollectionStatus","kind":"Gdef"},"Counter":{".class":"SymbolTableNode","cross_ref":"prometheus_client.metrics.Counter","kind":"Gdef"},"DocumentRepository":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.repositories.document_repository.DocumentRepository","kind":"Gdef"},"Gauge":{".class":"SymbolTableNode","cross_ref":"prometheus_client.metrics.Gauge","kind":"Gdef"},"Histogram":{".class":"SymbolTableNode","cross_ref":"prometheus_client.metrics.Histogram","kind":"Gdef"},"Mapping":{".class":"SymbolTableNode","cross_ref":"typing.Mapping","kind":"Gdef"},"OperationRepository":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.repositories.operation_repository.OperationRepository","kind":"Gdef"},"OperationStatus":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.models.OperationStatus","kind":"Gdef"},"OperationType":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.models.OperationType","kind":"Gdef"},"Redis":{".class":"SymbolTableNode","cross_ref":"redis.Redis","kind":"Gdef"},"ResourceType":{".class":"SymbolTableNode","cross_ref":"packages.webui.api.chunking_exceptions.ResourceType","kind":"Gdef"},"SoftTimeLimitExceeded":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.SoftTimeLimitExceeded","name":"SoftTimeLimitExceeded","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.chunking_tasks.SoftTimeLimitExceeded","source_any":null,"type_of_any":3}}},"TYPE_CHECKING":{".class":"SymbolTableNode","cross_ref":"typing.TYPE_CHECKING","kind":"Gdef"},"Task":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.Task","name":"Task","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.chunking_tasks.Task","source_any":null,"type_of_any":3}}},"UTC":{".class":"SymbolTableNode","cross_ref":"datetime.UTC","kind":"Gdef"},"__annotations__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"packages.webui.chunking_tasks.__annotations__","name":"__annotations__","setter_type":null,"type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.dict"}}},"__doc__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"packages.webui.chunking_tasks.__doc__","name":"__doc__","setter_type":null,"type":"builtins.str"}},"__file__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"packages.webui.chunking_tasks.__file__","name":"__file__","setter_type":null,"type":"builtins.str"}},"__name__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"packages.webui.chunking_tasks.__name__","name":"__name__","setter_type":null,"type":"builtins.str"}},"__package__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"packages.webui.chunking_tasks.__package__","name":"__package__","setter_type":null,"type":"builtins.str"}},"__spec__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"packages.webui.chunking_tasks.__spec__","name":"__spec__","setter_type":null,"type":"_frozen_importlib.ModuleSpec"}},"_calculate_batch_size":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["error_handler","initial_memory"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._calculate_batch_size","name":"_calculate_batch_size","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["error_handler","initial_memory"],"arg_types":["packages.webui.services.chunking_error_handler.ChunkingErrorHandler","builtins.int"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_calculate_batch_size","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},"builtins.int"],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_check_resource_limits":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["error_handler","operation_id","correlation_id","initial_memory"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._check_resource_limits","name":"_check_resource_limits","type":{".class":"CallableType","arg_kinds":[0,0,0,0],"arg_names":["error_handler","operation_id","correlation_id","initial_memory"],"arg_types":["packages.webui.services.chunking_error_handler.ChunkingErrorHandler","builtins.str","builtins.str","builtins.int"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_check_resource_limits","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"NoneType"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_get_documents_for_operation":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["operation","collection","operation_repo","db"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._get_documents_for_operation","name":"_get_documents_for_operation","type":{".class":"CallableType","arg_kinds":[0,0,0,0],"arg_names":["operation","collection","operation_repo","db"],"arg_types":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},"packages.shared.database.repositories.operation_repository.OperationRepository","sqlalchemy.ext.asyncio.session.AsyncSession"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_get_documents_for_operation","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"Instance","args":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"extra_attrs":null,"type_ref":"builtins.list"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_handle_soft_timeout":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._handle_soft_timeout","name":"_handle_soft_timeout","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"arg_types":["builtins.str","builtins.str","packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_handle_soft_timeout","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"NoneType"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_handle_soft_timeout_sync":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"packages.webui.chunking_tasks._handle_soft_timeout_sync","name":"_handle_soft_timeout_sync","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"arg_types":["builtins.str","builtins.str","packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_handle_soft_timeout_sync","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_monitor_resources":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0],"arg_names":["process","operation_id","initial_memory","initial_cpu_time","error_handler","correlation_id"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._monitor_resources","name":"_monitor_resources","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0],"arg_names":["process","operation_id","initial_memory","initial_cpu_time","error_handler","correlation_id"],"arg_types":[{".class":"AnyType","missing_import_name":"packages.webui.chunking_tasks.psutil","source_any":null,"type_of_any":3},"builtins.str","builtins.int","builtins.float","packages.webui.services.chunking_error_handler.ChunkingErrorHandler","builtins.str"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_monitor_resources","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"NoneType"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_process_chunking_operation_async":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._process_chunking_operation_async","name":"_process_chunking_operation_async","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"arg_types":["builtins.str","builtins.str","packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_process_chunking_operation_async","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_process_chunking_operation_sync":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"packages.webui.chunking_tasks._process_chunking_operation_sync","name":"_process_chunking_operation_sync","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["operation_id","correlation_id","celery_task"],"arg_types":["builtins.str","builtins.str","packages.webui.chunking_tasks.ChunkingTask"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_process_chunking_operation_sync","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_send_progress_update":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0],"arg_names":["redis_client","operation_id","correlation_id","progress","message"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine"],"fullname":"packages.webui.chunking_tasks._send_progress_update","name":"_send_progress_update","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0],"arg_names":["redis_client","operation_id","correlation_id","progress","message"],"arg_types":[{".class":"UnionType","items":[{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"redis.client.Redis"},{".class":"NoneType"}],"uses_pep604_syntax":true},"builtins.str","builtins.str","builtins.int","builtins.str"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_send_progress_update","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"NoneType"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_send_progress_update_sync":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0],"arg_names":["redis_client","operation_id","correlation_id","progress","message"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"packages.webui.chunking_tasks._send_progress_update_sync","name":"_send_progress_update_sync","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0],"arg_names":["redis_client","operation_id","correlation_id","progress","message"],"arg_types":[{".class":"UnionType","items":[{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"redis.client.Redis"},{".class":"NoneType"}],"uses_pep604_syntax":true},"builtins.str","builtins.str","builtins.int","builtins.str"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_send_progress_update_sync","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"asyncio":{".class":"SymbolTableNode","cross_ref":"asyncio","kind":"Gdef"},"cast":{".class":"SymbolTableNode","cross_ref":"typing.cast","kind":"Gdef"},"celery_app":{".class":"SymbolTableNode","cross_ref":"packages.webui.celery_app.celery_app","kind":"Gdef"},"chunking_active_operations":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.chunking_active_operations","name":"chunking_active_operations","setter_type":null,"type":"prometheus_client.metrics.Gauge"}},"chunking_operation_memory_usage":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.chunking_operation_memory_usage","name":"chunking_operation_memory_usage","setter_type":null,"type":"prometheus_client.metrics.Gauge"}},"chunking_task_duration":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.chunking_task_duration","name":"chunking_task_duration","setter_type":null,"type":"prometheus_client.metrics.Histogram"}},"chunking_tasks_completed":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.chunking_tasks_completed","name":"chunking_tasks_completed","setter_type":null,"type":"prometheus_client.metrics.Counter"}},"chunking_tasks_failed":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.chunking_tasks_failed","name":"chunking_tasks_failed","setter_type":null,"type":"prometheus_client.metrics.Counter"}},"chunking_tasks_started":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.chunking_tasks_started","name":"chunking_tasks_started","setter_type":null,"type":"prometheus_client.metrics.Counter"}},"current_task":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.current_task","name":"current_task","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.chunking_tasks.current_task","source_any":null,"type_of_any":3}}},"datetime":{".class":"SymbolTableNode","cross_ref":"datetime.datetime","kind":"Gdef"},"ensure_sync_redis":{".class":"SymbolTableNode","cross_ref":"packages.webui.services.type_guards.ensure_sync_redis","kind":"Gdef"},"gc":{".class":"SymbolTableNode","cross_ref":"gc","kind":"Gdef"},"get_or_generate_correlation_id":{".class":"SymbolTableNode","cross_ref":"packages.webui.middleware.correlation.get_or_generate_correlation_id","kind":"Gdef"},"get_redis_client":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[],"arg_names":[],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"packages.webui.chunking_tasks.get_redis_client","name":"get_redis_client","type":{".class":"CallableType","arg_kinds":[],"arg_names":[],"arg_types":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"get_redis_client","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4}],"extra_attrs":null,"type_ref":"redis.client.Redis"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"get_redis_manager":{".class":"SymbolTableNode","cross_ref":"packages.webui.services.factory.get_redis_manager","kind":"Gdef"},"json":{".class":"SymbolTableNode","cross_ref":"json","kind":"Gdef"},"logger":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"packages.webui.chunking_tasks.logger","name":"logger","setter_type":null,"type":"logging.Logger"}},"logging":{".class":"SymbolTableNode","cross_ref":"logging","kind":"Gdef"},"monitor_dead_letter_queue":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":0,"arg_kinds":[],"arg_names":[],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_decorated"],"fullname":"packages.webui.chunking_tasks.monitor_dead_letter_queue","name":"monitor_dead_letter_queue","type":{".class":"CallableType","arg_kinds":[],"arg_names":[],"arg_types":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"monitor_dead_letter_queue","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.monitor_dead_letter_queue","name":"monitor_dead_letter_queue","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.celery_app.Celery","source_any":{".class":"AnyType","missing_import_name":"packages.webui.celery_app.Celery","source_any":null,"type_of_any":3},"type_of_any":7}}}},"pg_connection_manager":{".class":"SymbolTableNode","cross_ref":"packages.shared.database.postgres_database.pg_connection_manager","kind":"Gdef"},"process_chunking_operation":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","operation_id","correlation_id"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_decorated"],"fullname":"packages.webui.chunking_tasks.process_chunking_operation","name":"process_chunking_operation","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","operation_id","correlation_id"],"arg_types":["packages.webui.chunking_tasks.ChunkingTask","builtins.str","builtins.str"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"process_chunking_operation","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_ofgrep: packages/webui/__pycache__/chunking_tasks.cpython-312.pyc: binary file matches
_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.process_chunking_operation","name":"process_chunking_operation","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.celery_app.Celery","source_any":{".class":"AnyType","missing_import_name":"packages.webui.celery_app.Celery","source_any":null,"type_of_any":3},"type_of_any":7}}}},"psutil":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.psutil","name":"psutil","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.chunking_tasks.psutil","source_any":null,"type_of_any":3}}},"retry_failed_documents":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Decorator","func":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["self","operation_id","failed_documents","correlation_id"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_decorated"],"fullname":"packages.webui.chunking_tasks.retry_failed_documents","name":"retry_failed_documents","type":{".class":"CallableType","arg_kinds":[0,0,0,0],"arg_names":["self","operation_id","failed_documents","correlation_id"],"arg_types":[{".class":"AnyType","missing_import_name":"packages.webui.chunking_tasks.Task","source_any":null,"type_of_any":3},"builtins.str",{".class":"Instance","args":["builtins.str"],"extra_attrs":null,"type_ref":"builtins.list"},"builtins.str"],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"retry_failed_documents","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}},"is_overload":false,"var":{".class":"Var","flags":["is_ready","is_inferred"],"fullname":"packages.webui.chunking_tasks.retry_failed_documents","name":"retry_failed_documents","setter_type":null,"type":{".class":"AnyType","missing_import_name":"packages.webui.celery_app.Celery","source_any":{".class":"AnyType","missing_import_name":"packages.webui.celery_app.Celery","source_any":null,"type_of_any":3},"type_of_any":7}}}},"signal":{".class":"SymbolTableNode","cross_ref":"signal","kind":"Gdef"},"time":{".class":"SymbolTableNode","cross_ref":"time","kind":"Gdef"},"traceback":{".class":"SymbolTableNode","cross_ref":"traceback","kind":"Gdef"},"uuid":{".class":"SymbolTableNode","cross_ref":"uuid","kind":"Gdef"}},"path":"packages/webui/chunking_tasks.py"}
packages/webui/chunking_tasks.py:374:                    "error_type": self._classify_error_sync(exc),
packages/webui/chunking_tasks.py:412:    def _classify_error_sync(self, exc: Exception) -> str:
AUDIT_DETAILED_FINDINGS.md:56:- **chunking_tasks.py:388-415** - `_classify_error_sync()`
tickets/ENG-002.txt:11:- `packages/webui/chunking_tasks.py:388-415` defines `_classify_error_sync` returning string identifiers for internal exception classes (e.g., `ChunkingMemoryError`).
tickets/ENG-002.txt:25:   - Replace `_classify_error_sync` with thin wrapper invoking `ErrorClassifier.as_code`. Maintain existing string outputs for compatibility (e.g., `memory_error`).
repomix-output.xml:91577:                    "error_type": self._classify_error_sync(exc),
repomix-output.xml:91615:    def _classify_error_sync(self, exc: Exception) -> str:
