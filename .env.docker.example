# Docker Environment Configuration for Semantik
# Copy this file to .env and update with your values

# -- Authentication Configuration --
# IMPORTANT: This will be automatically generated when using 'make docker-up'
# To manually generate: openssl rand -hex 32
JWT_SECRET_KEY=CHANGE_THIS_TO_A_STRONG_SECRET_KEY
ACCESS_TOKEN_EXPIRE_MINUTES=1440
FLOWER_USERNAME=replace-me-with-flower-user
FLOWER_PASSWORD=replace-me-with-strong-flower-password

# -- CORS Configuration --
# Comma-separated list of allowed origins for frontend development
# Default: http://localhost:5173,http://127.0.0.1:5173 (Vite default port)
# Example: http://localhost:3000,http://localhost:5173,https://myapp.com
# CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# -- Embedding Model Configuration --
# Model settings are the same for both GPU and CPU deployments
USE_MOCK_EMBEDDINGS=false
DEFAULT_EMBEDDING_MODEL=Qwen/Qwen3-Embedding-0.6B

# -- Quantization Options --
# float32: Full precision (CPU/GPU, highest quality, most memory)
# float16: Half precision (GPU only, good quality, 50% less memory)
# int8: 8-bit quantization (GPU only, 75% less memory)
#
# NOTE: INT8 quantization now works with both standard and CUDA builds.
# For optimal GPU performance, the CUDA build is still recommended:
# docker compose -f docker-compose.yml -f docker-compose.cuda.yml up -d --build
#
# Memory usage examples for Qwen3-Embedding-0.6B:
# - float32: ~2.4GB VRAM
# - float16: ~1.2GB VRAM (recommended for most GPUs)
# - int8: ~0.6GB VRAM (requires CUDA build)
DEFAULT_QUANTIZATION=float16

# -- PostgreSQL Configuration (Optional - for PostgreSQL deployment) --
# Database URL - if set, overrides individual connection parameters
# For Docker, use the container name as host
# DATABASE_URL=postgresql://semantik:password@postgres:5432/semantik

# Individual PostgreSQL connection parameters
# Use these with docker-compose.postgres.yml
# POSTGRES_HOST=postgres       # Container name from docker-compose
# POSTGRES_PORT=5432
# POSTGRES_DB=semantik
# POSTGRES_USER=semantik
# POSTGRES_PASSWORD will be auto-generated by 'make docker-postgres-up' if not set
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD

# PostgreSQL connection pool settings
# DB_POOL_SIZE=20              # Connection pool size
# DB_MAX_OVERFLOW=40           # Maximum overflow connections
# DB_POOL_TIMEOUT=30           # Pool timeout in seconds
# DB_POOL_RECYCLE=3600         # Connection recycle time in seconds
# DB_POOL_PRE_PING=true        # Test connections before use

# -- Qdrant Configuration --
# These are set automatically by docker-compose for inter-container communication
# Only override if using an external Qdrant instance
# QDRANT_HOST=qdrant
# QDRANT_PORT=6333
DEFAULT_COLLECTION=work_docs

# -- Document Processing Paths --
# Path on host machine containing documents to process
# This will be mounted read-only into the container
DOCUMENT_PATH=./documents

# -- Service Configuration --
# Number of worker processes for the WebUI (adjust based on CPU cores)
WEBUI_WORKERS=1

# -- GPU Configuration --
# Default configuration uses GPU acceleration
# Set which GPU to use (0 = first GPU, 1 = second GPU, etc.)
CUDA_VISIBLE_DEVICES=0
# GPU memory limit in GB
MODEL_MAX_MEMORY_GB=8

# -- Logging Configuration --
# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# -- Rate Limiting (Optional) --
# API rate limiting configuration
# RATE_LIMIT_PER_MINUTE=60

# -- External Services (Optional) --
# If using external reranking service
# RERANKER_API_URL=
# RERANKER_API_KEY=

# -- Model Storage Configuration --
# Directory on host machine for persistent HuggingFace model storage
# Models will be downloaded once and reused across container restarts
HF_CACHE_DIR=./models

# Enable offline mode after models are downloaded to prevent rate limiting
# Set to true after initial model download to use only cached models
HF_HUB_OFFLINE=false
