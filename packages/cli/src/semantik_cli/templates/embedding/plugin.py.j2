"""Embedding plugin scaffold for {{ name }}."""

from __future__ import annotations

from typing import Any, ClassVar

from shared.embedding.plugin_base import BaseEmbeddingPlugin, EmbeddingProviderDefinition
from shared.embedding.types import EmbeddingMode


class {{ class_name }}EmbeddingPlugin(BaseEmbeddingPlugin):
    INTERNAL_NAME: ClassVar[str] = "{{ module_name }}"
    API_ID: ClassVar[str] = "{{ module_name }}"
    PROVIDER_TYPE: ClassVar[str] = "local"
    METADATA: ClassVar[dict[str, Any]] = {
        "display_name": "{{ name }}",
        "description": "Custom embedding provider",
    }

    @classmethod
    def get_definition(cls) -> EmbeddingProviderDefinition:
        return EmbeddingProviderDefinition(
            api_id=cls.API_ID,
            internal_id=cls.INTERNAL_NAME,
            display_name=cls.METADATA["display_name"],
            description=cls.METADATA["description"],
            provider_type=cls.PROVIDER_TYPE,
            supports_quantization=False,
            supports_instruction=False,
            supports_batch_processing=True,
            supports_asymmetric=False,
            supported_models=(),
            default_config={},
            performance_characteristics={},
            is_plugin=True,
        )

    @classmethod
    def supports_model(cls, model_name: str) -> bool:  # noqa: ARG003
        return False

    async def initialize(self, model_name: str, **kwargs: Any) -> None:  # noqa: ARG002
        raise NotImplementedError

    async def embed_texts(
        self,
        texts: list[str],
        batch_size: int = 32,
        mode: EmbeddingMode | None = None,  # noqa: ARG002
    ) -> list[list[float]]:
        raise NotImplementedError

    async def embed_single(self, text: str, mode: EmbeddingMode | None = None) -> list[float]:  # noqa: ARG002
        raise NotImplementedError

    def get_dimension(self) -> int:
        raise NotImplementedError

    def get_model_info(self) -> dict[str, Any]:
        return {}

    async def cleanup(self) -> None:
        return None
